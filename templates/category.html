{% extends "base.html" %}
{% block content %}

<!-- All Products Page -->
<section class="category-products py-4">
  <div class="container">
    <!-- Mobile Search (only visible on mobile) -->
    <div style="margin-top: -10%;" class="mobile-search d-block d-lg-none p-3 position-relative">
      <form class="d-flex position-relative">
        <input class="form-control" type="search" placeholder="Search products">
        <span class="search-icon"><i class="bi bi-search"></i></span>
      </form>
    </div>

    <!-- Mobile Dropdown Links (centered) -->
    <div class="d-lg-none text-center mt-2 mb-3">
      <div class="d-inline-flex gap-3">
        
        <!-- Product Categories Dropdown -->
        <div class="dropdown">
          <button class="btn btn-outline-dark dropdown-toggle" type="button" id="mobileProductDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            Products
          </button>
          <ul class="dropdown-menu text-center" aria-labelledby="mobileProductDropdown">
            {% set categories = ['electronics', 'dress', 'mobile', 'sports', 'beauty', 'toys'] %}
                    {% for category in categories %}
                      <a class="dropdown-item" href="{{ url_for('shop.category_page', category_name=category) }}">
                        {{ category.title() if category != 'dress' else 'Fashion' }}
                      </a>
                    {% endfor %}
          </ul>
        </div>

        <!-- Shops Dropdown -->
        <div class="dropdown">
          <button class="btn btn-outline-dark dropdown-toggle" type="button" id="mobileShopDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            Shop
          </button>
          <ul class="dropdown-menu text-center" aria-labelledby="mobileShopDropdown">
            {% for s in all_shops %}
            <li>
              <a class="dropdown-item" href="{{ url_for('shop.shop_page', shop_name=s) }}">
                {{ s }}
              </a>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>

    <!-- Page Header -->
    <div class="text-center mb-4">
      <h2 class="fw-bold">All Products â€“ {{ category_name }}</h2>
      <p class="text-muted">Browse products from all stores in this category.</p>
    </div>

    <!-- Products Grid -->
    <div class="row g-4">
      {% for product in products %}
      <div class="col-6 col-md-4 col-lg-3">
        <div class="card h-100 product-card text-center">
          <img src="{{ url_for('static', filename='images/' + product.image) }}"
               class="card-img-top"
               alt="{{ product.name }}">
          <div class="card-body d-flex flex-column">
            <h6 class="fw-bold mb-1">{{ product.name }}</h6>
            <p class="text-muted small mb-1">From: {{ product.store }}</p>
            <p class="price fw-bold mb-2">${{ product.price }}</p>
            <a style="color: black;" href="{{ url_for('shop.product_page', product_id=product.id) }}"
               class="btn btn-sm btn-warning mt-auto">View</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    {% if not products %}
    <div class="text-center py-5">
      <p class="text-muted">No products found in this category.</p>
    </div>
    {% endif %}

  </div>
</section>

{% endblock %}
